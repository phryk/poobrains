@import 'colors';


@keyframes scroll {

    0% {
    }

    100% {
        transform: translateY(-170px);
    }
}

@keyframes bump {

    0% {
        transform: scale(1);
    }

    50% {
        transform: scale(0.5);
    }

    100% {
        transform: scale(1);
    }
}

text {
    font-family: 'Open Sans', sans;
}

svg#hexascroll {

    g#hexagon-wrapper {
        /*animation: scroll 30s linear infinite;*/
    }

    use {
        fill: opacify($color_background_dark, -0.2);
        stroke: $color_background_light;
        stroke-width: 2;

        &.hexagon {
            transition: fill 0.5s;

            &:hover {
                fill: $color_background_light !important;
            }

            &:nth-child(8n){
                /*animation: bump 2s linear infinite;*/
            }
        }
    }
}

path#icon {
    stroke: $color_highlight;
}


/** Datavis stuff below this **/

.marker {

    opacity: 0.8;
    fill: desaturate($color_highlight, 20%);
    stroke-width: 2px;
    stroke: transparentize($color_background_light, 100%);
    transition: opacity 0.3s linear, fill 0.3s linear, stroke 0.3s linear;

}

.plot {

    background: $color_background_dark;

    .plot-inner {
        overflow: visible;

        .grid {

            line {
                stroke: opacify($color_font_light, -80%);
                stroke-width: 2px;
            }
        }

        g.dataset {

            .dataset-line {
                opacity: 0.3;
                stroke: $color_font_light;
                stroke-width: 2px;
                fill: none;
                transition: opacity 0.3s linear;
            }

            &:hover,
            &:focus,
            &:target {

                .dataset-line {
                    opacity: 0.8;
                }

            }
        
            g.datapoint {
                opacity: 0.7;

                g.error {
                    /* not quite sure why i need to supply those things again in here. firefox fuckup? something to do with <g> scoping (but why haven't i noticed it elsewhere then? */
                    opacity: 0.3;
                    transition: opacity 0.3s linear;
                    line {
                        stroke: $color_font_light;
                        stroke-width: 2px;
                    }
                }

                &:hover,
                &:focus,
                &:target {

                    .marker {

                        opacity: 1;
                        fill: $color_highlight;
                        stroke: $color_background_light;
                    }

                    g.error {
                        opacity: 1;
                    }
                }
            }
        }
    }

    .axis-label {

        font-size: 14px;
        fill: $color_font_light;

        &.axis-y {
            /*transform-origin: 0px 330px;*/
            transform: rotate(-90deg) translate(5px, 15px);
        }
    }
}


.map {

    .ocean {
        fill: darken($color_highlight, 45%);
    }

    .country {

        stroke: opacify($color_background_light, -20%);
        stroke-width: 1px;
        stroke-miterlimit: 1;
        fill: opacify($color_background_dark, -20%);
        transition: fill 0.3s linear, stroke 0.3s linear;

        &:hover {
            stroke: $color_highlight;
            fill: mix($color_highlight, $color_background_dark, 25%);
        }

        g,
        path {
            stroke-width: 0.1rem;
        }

    }
}

.map-dataset {

    .map-datapoint {

        .infobox {

            display: none;
            opacity: 0;
            fill: $color_font_light;
            font-size: 1rem;
            /*transform: translateY(1rem);*/
            transition: opacity 3s linear;

            &.fallback {

                overflow-y: scroll;

                .background {
                    fill: $color_background_dark;
                }

                text {
                    stroke: $color_font_light;
                    font-size: 14px;
                    font-weight: lighter;
                }

                .heading {
                    font-weight: bold;
                }
            }

            &.html {
                body {
                    margin: 0;
                    padding: 10px;
                    overflow-y: auto;
                    height: calc(100% - 20px);
                    background: $color_background_dark;
                    color: $color_font_light;
                    font-family: 'Open Sans', sans;

                    h1 {
                        margin-top: 0;
                        font-size: 120%;
                    }

                    .footer {
                        font-size: 80%;
                    }
                }
            }
        }

        &:hover,
        &:focus,
        &:target {

            cursor: help;

            .marker {
                opacity: 1;
                fill: $color_highlight;
                stroke: $color_background_light;
            }

            .infobox {
                display: block;
                opacity: 1;
                background: #111;
            }
        }
    }
}
