{% extends "named.jinja" %}

{% block header %}

    {{ super() }}

    {% if mode == 'full' %}
        <h2>Tag hierarchy:</h2>
        {{ content.tree().render('full') }}
    {% endif %}

{% endblock %}


{% block content %}

    <div class="description">{{ content.description.render() }}</div>

    {% if mode == 'full' %}

        <div class="posts">
        {% with tagged_posts = content.list_tagged() %}

            {% if not tagged_posts.results|length %}
                <p>No associated content.</p>
            {% else %}
                <ul class="tagged-posts">
                {% for post in tagged_posts.results %}
                    <li>{{ post.render('teaser') }}</li>
                {% endfor %}
                </ul>

                {% if tagged_posts.menu %}
                    {{ tagged_posts.menu.render() }}
                {% endif %}
            {% endif %}

        {% endwith %}

    {% endif %}

{% endblock %}

{% block footer %}
{% if mode != 'full' %}
This tag has {{ content.list_tagged().results|length }} posts associated with it.
{% endif %}
{% endblock %}
